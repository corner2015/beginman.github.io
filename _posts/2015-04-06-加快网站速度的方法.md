---
layout: post
title: "加快网站速度的方法"
description: "加快网站速度的方法"
category: "web开发"
tags: [web开发]
---
{% include JB/setup %}
<ul>
    <li>作者：<a href="http://weibo.com/beginman" target="blank">BeginMan</a></li>
    <li>本文地址：http://beginman.github.io</li>
    <li>转载请注明出处</li>
</ul>
<h1>1: 缩小Javascript和CSS文件</h1>

<p>如果你的网站大约有50-60%的用户是第一次访客，那么这些人会下载Javascript和CSS，如果这些文件很大浏览器会下载很长时间。</p>

<p>使用压缩工具可以减少Javascript和CSS尽一半的文件大小，如果你有信心使用“命令行”我强烈推荐使用<a href="http://yui.github.io/yuicompressor/">雅虎的YUI压缩</a>，至少能提高40%到60%的压缩率，如果你是在不懂可以用<a href="http://tool.chinaz.com/Tools/CssFormat.aspx">站长之家的CSS\JS压缩工具</a>。</p>

<!--more-->

<h1>2：减少HTTP请求</h1>

<p>浏览器会花费80%的时间获取外部元件，包括脚本、样式表、图像等，只有20%的时间用来加载内容，每个网站都会有许多HTTP请求，由于只有2个HTTP请求可以在同一时间传送，所以请求一旦过多就会造成延迟。</p>

<h1>3：缓存图片、CSS和Javascript</h1>

<p>每当一个新用户访问你的网站，图片、CSS和Javascript应该在其浏览器缓存，这样他们下一次访问就特别快。</p>

<p>绝大多数windows主机已经默认启用了，只需要在控制面板中设定过期时间和文件类型那个就可以了，我建议图片、CSS和Javascript时间可设置为一个月。而对于Apache Web服务器，使用mod_cache模块开启缓存。</p>

<h1>4：合并CSS引用图片</h1>

<p>如图一所示，很多网站的图片都是切成小块的，这样下来就会有大量CSS引用图片，cssimages也是影响网站速度的一种重要因素。</p>

<p>如果我们把CSS图片合并成一个，14个HTTP请求变成1个，想想会是什么效果？它的原理就是通过CSS坐标的方式取得图片径路，每个CSS标签引用不同坐标就会得到不同图片。我们看到很多网站的CSS图片只有一张，用的就是这个原理。</p>

<p>不懂也没有关系，<a href="http://cn.spritegen.website-performance.org/">CSS图片合并生成器</a>这个网站能帮助你合并CSS图片，并且能得到相应代码。</p>

<h1>5：只加载<head>部分的基本脚本</h1>

<p>这个最简单，不花时间，点击自己网站右键“查看源文件”找到<head>与</head>之间的区域，看看那些不重要好的JS文件，把它仍到页面底部，也就是让它最后加载。或者直接删除。</p>

<p>例如卢松松博客引用的jiathis（社会化分享按钮）和util.js（回顶部、写评论快捷标签），让它最后加载，这样能提升内容打开速度，而且它们也不太重要。</p>

<h1>6：对图像进行压缩</h1>

<p>除非你加载视频，那么影响网站速度罪魁祸首应该就是图片了，如果是jpeg、png图片，保证不失品质的前提下，让他们尽量压缩，Fireworks软件“导出向导”功能，它提供了一个很好的方式来预览保存的图像，让图片大小与质量之间平衡，大多数其他图像编辑软件都有类似的功能。</p>

<p>例如我的每篇博文配图都用了“导出向导”功能，我尽量把图片都压缩在30K以内，在一定程度上加快了浏览速度，但也有部分图片失真，看不清楚。</p>

<h1>7：开启gzip模块</h1>

<p>gzip压缩是非常流行的一种数据压缩格式，一般网站启用gzip后，压缩率都会有70%-80%的提升，效果是立竿见影的。</p>

<p>部分虚拟主机默认有gzip功能，但大部分没有，独立主机、VPS一般可以设置，开启gzip会加重服务器负担，而且要修改服务器配置，强烈建议大家开启gzip，如果不清楚可以问问所在空间商，让他们帮忙开启。</p>

<p><strong>对于Django的Gzip：</strong></p>

<p>可以参考这篇文章：<a href="http://blog.csdn.net/jianhong1990/article/details/8960088">启用django的gzip压缩支持</a></p>

<p><strong>一种方式是通过修饰器：</strong></p>

<p>参考：[Reference here: https://docs.djangoproject.com/en/1.4/topics/http/decorators/#module-django.views.decorators.gzip](Reference here: https://docs.djangoproject.com/en/1.4/topics/http/decorators/#module-django.views.decorators.gzip)</p>

<pre><code>from django.views.decorators.gzip import gzip_page

@gzip_page
def viewFunc(request):
  return HttpResponse("hello"*100)
</code></pre>

<p><strong>另一种方式：使用中间件<code>GZipMiddleware</code></strong>:</p>

<pre><code>#settings.py
MIDDLEWARE_CLASSES = (
 django.middleware.gzip.GZipMiddleware,
...

)

from django.middleware.gzip import GZipMiddleware

gzip_middleware = GZipMiddleware()

 def dec(request, *args, **kwargs):
        response = func(request, *args, **kwargs)
        return gzip_middleware.process_response(request, response)
        return dec
</code></pre>

<p>参考：http://stackoverflow.com/questions/957577/serving-gzipped-content-from-django</p>

<p>还有** 网站程序中采用DIV+CSS这种模式，不用Table， 能减少网站加载时间。**</p>

<p>参考：<a href="http://lusongsong.com/reed/360.html">提高网站打开速度的7大秘籍</a></p>

<p><img src="http://img5.douban.com/lpic/s5914296.jpg" alt="" /></p>
